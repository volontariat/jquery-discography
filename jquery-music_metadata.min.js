(function(){var t=function(t,s){function n(){this.constructor=t}for(var a in s)e.call(s,a)&&(t[a]=s[a]);return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t},e={}.hasOwnProperty;!function(e){var s,n,a,i,r,o;return i={},i.Base=a=function(){function t(t,e){t&&this.init(t,e)}return t.prototype.defaults={host:"http://Volontari.at"},t.prototype.init=function(t,s){return this.options=e.extend({},this.defaults,s),this.$el=e(t),e.data(t,this.constructor.prototype.jqueryInstanceMethodName,this)},t}(),i.Artists=n=function(s){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,s),n.prototype.jqueryInstanceMethodName="musicArtists",n.prototype.init=function(t,e){return n.__super__.init.call(this,t,e),this.showHeadAndPage(1)},n.prototype.showHeadAndPage=function(t){var e;return e='<table class="table table-striped">\n  <thead>\n    <tr class="odd">\n      <th style="width: 300px;">Name</th>\n      <th>Disambiguation</th>\n      <th style="width: 75px;">Founded at</th>\n      <th style="width: 75px;">Dissolved at</th>\n      <th style="width: 75px;">Listeners</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td colspan="4" style="background-color:white;">\n        <img src="https://i1.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif" style="width:16px; height:16px;"/>\n      </td>\n    </tr>\n  </tbody>\n</table> \n<nav>\n  <ul class="pagination">\n  </ul>\n</nav>',this.$el.html(e),this.showPage(t,!0)},n.prototype.showPage=function(t,s){return this.$el.data("current-page",t),e.ajax({url:this.options.host+"/api/v1/music/artists.json?state=active&page="+t,type:"GET",dataType:"json",success:function(t){return function(n){var a;return t.$el.find("tbody").empty(),0===n.entries.length?(a='<tr>\n  <td colspan="4" style="background-color:white;">\n    No artists found!\n  </td>\n</tr>',t.$el.find("tbody").html(a)):(e.each(n.entries,function(s,n){return e.each(n,function(t,e){var s;switch(t){case"founded_at":case"dissolved_at":return null===e?n[t]="":(s=new Date(e),n[t]=s.toLocaleDateString());default:if(null===e)return n[t]=""}}),a='<tr class="even">\n  <td style="width: 300px;"><a class="music_artist_link" href="#" data-id="'+n.id+'">'+n.name+"</a></td>\n  <td>"+n.disambiguation+'</td>\n  <td style="width: 75px">'+n.founded_at+'</td>\n  <td style="width: 75px">'+n.dissolved_at+'</td>\n  <td style="width: 75px">'+n.listeners+"</td>\n</tr>",t.$el.find("tbody").append(a)}),t.$el.find(".music_artist_link").on("click",function(s){var n;return s.preventDefault(),n=t.$el.data("current-page"),t.$el.data("artist-id",e(s.target).data("id")),t.$el.data("last-artists-page",n),t.$el.musicArtist("showMetadata")}),s?t.$el.find(".pagination").pagination({items:n.total_entries,itemsOnPage:n.per_page,currentPage:n.current_page,onPageClick:function(e){return t.showPage(e,!1)}}):void 0)}}(this),error:function(t){return function(){var e;return e='<tr>\n  <td colspan="4" style="background-color:white;">\n    Failed to load artists!\n  </td>\n</tr>',t.$el.find("tbody").html(e)}}(this)})},n}(i.Base),i.Artist=s=function(s){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,s),n.prototype.jqueryInstanceMethodName="musicArtist",n.prototype.init=function(t,e){return n.__super__.init.call(this,t,e),this.showMetadata()},n.prototype.showMetadata=function(){return e.ajax({url:this.options.host+"/api/v1/music/artists/"+this.$el.data("artist-id")+".json",type:"GET",dataType:"json",success:function(t){return function(e){var s;return s='<ol class="breadcrumb">\n  <li><a class="music_artists_link" href="#">Artists</a></li>\n  <li class="active">'+e.name+'</li>\n</ol>\n\n<h2>Albums & EPs</h2>\n\n<table id="music_releases" class="table table-striped">\n  <thead>\n    <tr class="odd">\n      <th style="width: 100px">Released at</th>\n      <th>Name</th>\n      <th style="width: 75px">Type</th>\n      <th style="width: 75px">Listeners</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td colspan="4" style="background-color:white;">\n        <img src="https://i1.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif" style="width:16px; height:16px;"/>\n      </td>\n    </tr>\n  </tbody>\n</table> ',t.$el.html(s),t.$el.find(".music_artists_link").on("click",function(){return t.$el.data("musicArtists")?t.$el.musicArtists("showHeadAndPage",t.$el.data("last-artists-page")||1):t.$el.musicArtists()}),t.showReleases()}}(this),error:function(){return function(t){return alert(404===t.status?"Artist not found!":"Failed to load artist!")}}(this)})},n.prototype.showReleases=function(){return e.ajax({url:this.options.host+"/api/v1/music/artists/"+this.$el.data("artist-id")+"/releases.json",type:"GET",dataType:"json",success:function(t){return function(s){var n;return e("#music_releases tbody").empty(),0===s.length?(n='<tr>\n  <td colspan="4" style="background-color:white;">No releases found!</td>\n</tr>',e("#music_releases tbody").html(n)):(e.each(s,function(t,s){var a;return e.each(s,function(t,e){var n;if(null===e)return s[t]="";switch(t){case"released_at":return null!==s.future_release_date&&""!==s.future_release_date?s[t]=s.future_release_date:(n=new Date(e),s[t]=n.toLocaleDateString())}}),a=s.is_lp?"Album":"EP",n='<tr class="even">\n  <td style="width: 100px">'+s.released_at+'</td>\n  <td><a class="music_release_link" href="#" data-id="'+s.id+'">'+s.name+'</a></td>\n  <td style="width: 75px">'+a+'</td>\n  <td style="width: 75px">'+s.listeners+"</td>\n</tr>",e("#music_releases tbody").append(n)}),t.$el.find(".music_release_link").on("click",function(s){return s.preventDefault(),t.$el.removeData("musicRelease"),t.$el.data("release-id",e(s.target).data("id")),t.$el.data("musicRelease")?t.$el.musicRelease("showMetadata"):t.$el.musicRelease()}))}}(this),error:function(){return function(){var t;return t='<tr>\n  <td colspan="4" style="background-color:white;">\n    Failed to load releases!\n  </td>\n</tr>',e("#music_releases tbody").html(t)}}(this)})},n}(i.Base),i.Release=r=function(s){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,s),n.prototype.jqueryInstanceMethodName="musicRelease",n.prototype.init=function(t,e){return n.__super__.init.call(this,t,e),this.showMetadata()},n.prototype.showMetadata=function(){return e.ajax({url:this.options.host+"/api/v1/music/releases/"+this.$el.data("release-id")+".json",type:"GET",dataType:"json",success:function(t){return function(s){var n;return n='<ol class="breadcrumb">\n  <li><a class="music_artists_link" href="#">Artists</a></li>\n  <li><a class="music_artist_link" href="#" data-id="'+s.artist_id+'">'+s.artist_name+'</a></li>\n  <li class="active">'+s.name+'</li>\n</ol>\n\n<h2>Tracks</h2>\n\n<table id="music_tracks" class="table table-striped">\n  <thead>\n    <tr class="odd">\n      <th style="width: 50px">Nr</th>\n      <th>Name</th>\n      <th style="width: 75px">Duration</th>\n      <th style="width: 75px">Listeners</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td colspan="4" style="background-color:white;">\n        <img src="https://i1.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif" style="width:16px; height:16px;"/>\n      </td>\n    </tr>\n  </tbody>\n</table> ',t.$el.html(n),t.$el.find(".music_artists_link").on("click",function(){return t.$el.data("musicArtists")?t.$el.musicArtists("showHeadAndPage",t.$el.data("last-artists-page")||1):t.$el.musicArtists()}),t.$el.find(".music_artist_link").on("click",function(s){return s.preventDefault(),t.$el.data("artist-id",e(s.target).data("id")),t.$el.data("musicArtist")?t.$el.musicArtist("showMetadata"):t.$el.musicArtist()}),t.showTracks()}}(this),error:function(){return function(t){return alert(404===t.status?"Release not found!":"Failed to load release!")}}(this)})},n.prototype.showTracks=function(){return e.ajax({url:this.options.host+"/api/v1/music/releases/"+this.$el.data("release-id")+"/tracks.json",type:"GET",dataType:"json",success:function(t){return function(s){var n;return e("#music_tracks tbody").empty(),0===s.length?(n='<tr>\n  <td colspan="4" style="background-color:white;">No tracks found!</td>\n</tr>',e("#music_tracks tbody").html(n)):(e.each(s,function(t,s){return e.each(s,function(t,e){return null===e?s[t]="":void 0}),n='<tr class="even">\n  <td style="width: 50px; text-align:right;">'+s.nr+'</td>\n  <td><a class="music_track_link" href="#" data-id="'+s.id+'">'+s.name+'</a></td>\n  <td style="width: 75px;">'+s.duration+'</td>\n  <td style="width: 75px;">'+s.listeners+"</td>\n</tr>",e("#music_tracks tbody").append(n)}),t.$el.find(".music_track_link").on("click",function(s){return s.preventDefault(),t.$el.data("track-id",e(s.target).data("id")),t.$el.data("musicTrack")?t.$el.musicTrack("showMetadata"):t.$el.musicTrack()}))}}(this),error:function(t){return function(){var e;return e='<tr>\n  <td colspan="4" style="background-color:white;">\n    Failed to load tracks!\n  </td>\n</tr>',t.$el.find("tbody").html(e)}}(this)})},n}(i.Base),i.Track=o=function(s){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,s),n.prototype.jqueryInstanceMethodName="musicTrack",n.prototype.init=function(t,e){return n.__super__.init.call(this,t,e),this.showMetadata()},n.prototype.showMetadata=function(){return e.ajax({url:this.options.host+"/api/v1/music/tracks/"+this.$el.data("track-id")+".json",type:"GET",dataType:"json",success:function(t){return function(s){var n;return n='<ol class="breadcrumb">\n  <li><a class="music_artists_link" href="#">Artists</a></li>\n  <li><a class="music_artist_link" href="#" data-id="'+s.artist_id+'">'+s.artist_name+'</a></li>\n  <li><a class="music_release_link" href="#" data-id="'+s.release_id+'">'+s.release_name+'</a></li>\n  <li class="active">'+s.name+'</li>\n</ol>\n\n<h2>Videos</h2>\n\n<div id="music_videos">\n  <img src="https://i1.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif" style="width:16px; height:16px;"/>\n</div>',t.$el.html(n),t.$el.find(".music_artists_link").on("click",function(){return t.$el.data("musicArtists")?t.$el.musicArtists("showHeadAndPage",t.$el.data("last-artists-page")||1):t.$el.musicArtists()}),t.$el.find(".music_artist_link").on("click",function(s){return s.preventDefault(),t.$el.data("artist-id",e(s.target).data("id")),t.$el.data("musicArtist")?t.$el.musicArtist("showMetadata"):t.$el.musicArtist()}),t.$el.find(".music_release_link").on("click",function(s){return s.preventDefault(),t.$el.data("release-id",e(s.target).data("id")),t.$el.data("musicRelease")?t.$el.musicRelease("showMetadata"):t.$el.musicRelease()}),t.showVideos()}}(this),error:function(){return function(t){return alert(404===t.status?"Track not found!":"Failed to load track!")}}(this)})},n.prototype.showVideos=function(){return e.ajax({url:this.options.host+"/api/v1/music/tracks/"+this.$el.data("track-id")+"/videos.json",type:"GET",dataType:"json",success:function(){return function(t){return e("#music_videos").empty(),0===t.length?e("#music_videos").html("No videos available!"):(e.each(t,function(t,s){var n;return e.each(s,function(t,e){return null===e?s[t]="":void 0}),n="<h3>"+s.artist_name+" – "+s.track_name+" ("+s.status+')</h3>\n<p>\n  <a href="'+s.url+'" class="oembed"></a>\n</p>',e("#music_videos").append(n)}),e("#music_videos .oembed").oembed())}}(this),error:function(){return function(){var t;return t='<tr>\n  <td colspan="4" style="background-color:white;">Failed to load videos!</td>\n</tr>',e("#music_videos").html(t)}}(this)})},n}(i.Base),e.pluginFactory=function(t){return e.fn[t.prototype.jqueryInstanceMethodName]=function(s){var n,a;return a=e.makeArray(arguments),n=a.slice(1),this.each(function(){var i;return i=e.data(this,t.prototype.jqueryInstanceMethodName),i?"string"==typeof s?i[s].apply(i,n):i.update?i.update.apply(i,a):void 0:new t(this,s)})}},e.pluginFactory(i.Artists),e.pluginFactory(i.Artist),e.pluginFactory(i.Release),e.pluginFactory(i.Track)}(window.jQuery,window)}).call(this);